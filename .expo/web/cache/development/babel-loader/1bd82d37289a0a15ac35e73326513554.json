{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useEffect, useState } from 'react';\nimport { auth } from 'firebase/auth';\nimport Loader from \"../components/common/Loader\";\nexport var AuthContext = createContext({});\nexport var AuthService = auth();\nexport function AuthProvider(props) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      authPending = _useState4[0],\n      setAuthPending = _useState4[1];\n\n  useEffect(function () {\n    return AuthService.onAuthStateChanged(function (result) {\n      if (result) {\n        var displayName = result.displayName,\n            email = result.email,\n            uid = result.uid,\n            photoURL = result.photoURL,\n            phoneNumber = result.phoneNumber;\n        var currentUser = {\n          displayName: displayName,\n          email: email,\n          uid: uid,\n          photoURL: photoURL,\n          phoneNumber: phoneNumber,\n          isAdmin: false\n        };\n        setAuthPending(true);\n        result.getIdTokenResult().then(function (_ref) {\n          var claims = _ref.claims;\n          currentUser.isAdmin = Boolean(claims.admin);\n          setUser(currentUser);\n          setAuthPending(false);\n        });\n      } else {\n        setUser();\n        setAuthPending(false);\n      }\n    });\n  }, []);\n  var children = props.children;\n\n  if (authPending) {\n    return React.createElement(Loader, null);\n  }\n\n  return React.createElement(AuthContext.Provider, {\n    value: {\n      user: user\n    }\n  }, children);\n}","map":{"version":3,"names":["React","createContext","useEffect","useState","auth","Loader","AuthContext","AuthService","AuthProvider","props","user","setUser","authPending","setAuthPending","onAuthStateChanged","result","displayName","email","uid","photoURL","phoneNumber","currentUser","isAdmin","getIdTokenResult","then","claims","Boolean","admin","children"],"sources":["/Users/autumn/private/partnerCardQuizz/providers/AuthProvider.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\nimport { auth } from 'firebase/auth';\nimport Loader from '../components/common/Loader';\n\nexport const AuthContext = createContext({});\n\nexport const AuthService = auth();\n\nexport function AuthProvider(props) {\n  const [user, setUser] = useState(null);\n  const [authPending, setAuthPending] = useState(true);\n\n  useEffect(() => {\n    return AuthService.onAuthStateChanged(result => {\n      if (result) {\n        const { displayName, email, uid, photoURL, phoneNumber } = result;\n        const currentUser = {\n          displayName,\n          email,\n          uid,\n          photoURL,\n          phoneNumber,\n          isAdmin: false,\n        };\n        // read claims if necessary\n        setAuthPending(true);\n        result.getIdTokenResult().then(({ claims }) => {\n          currentUser.isAdmin = Boolean(claims.admin);\n          setUser(currentUser);\n          setAuthPending(false);\n        });\n      } else {\n        setUser();\n        setAuthPending(false);\n      }\n    });\n  }, []);\n\n  const { children } = props;\n\n  if (authPending) {\n    return <Loader />;\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,EAA0CC,QAA1C,QAA0D,OAA1D;AACA,SAASC,IAAT,QAAqB,eAArB;AACA,OAAOC,MAAP;AAEA,OAAO,IAAMC,WAAW,GAAGL,aAAa,CAAC,EAAD,CAAjC;AAEP,OAAO,IAAMM,WAAW,GAAGH,IAAI,EAAxB;AAEP,OAAO,SAASI,YAAT,CAAsBC,KAAtB,EAA6B;EAClC,gBAAwBN,QAAQ,CAAC,IAAD,CAAhC;EAAA;EAAA,IAAOO,IAAP;EAAA,IAAaC,OAAb;;EACA,iBAAsCR,QAAQ,CAAC,IAAD,CAA9C;EAAA;EAAA,IAAOS,WAAP;EAAA,IAAoBC,cAApB;;EAEAX,SAAS,CAAC,YAAM;IACd,OAAOK,WAAW,CAACO,kBAAZ,CAA+B,UAAAC,MAAM,EAAI;MAC9C,IAAIA,MAAJ,EAAY;QACV,IAAQC,WAAR,GAA2DD,MAA3D,CAAQC,WAAR;QAAA,IAAqBC,KAArB,GAA2DF,MAA3D,CAAqBE,KAArB;QAAA,IAA4BC,GAA5B,GAA2DH,MAA3D,CAA4BG,GAA5B;QAAA,IAAiCC,QAAjC,GAA2DJ,MAA3D,CAAiCI,QAAjC;QAAA,IAA2CC,WAA3C,GAA2DL,MAA3D,CAA2CK,WAA3C;QACA,IAAMC,WAAW,GAAG;UAClBL,WAAW,EAAXA,WADkB;UAElBC,KAAK,EAALA,KAFkB;UAGlBC,GAAG,EAAHA,GAHkB;UAIlBC,QAAQ,EAARA,QAJkB;UAKlBC,WAAW,EAAXA,WALkB;UAMlBE,OAAO,EAAE;QANS,CAApB;QASAT,cAAc,CAAC,IAAD,CAAd;QACAE,MAAM,CAACQ,gBAAP,GAA0BC,IAA1B,CAA+B,gBAAgB;UAAA,IAAbC,MAAa,QAAbA,MAAa;UAC7CJ,WAAW,CAACC,OAAZ,GAAsBI,OAAO,CAACD,MAAM,CAACE,KAAR,CAA7B;UACAhB,OAAO,CAACU,WAAD,CAAP;UACAR,cAAc,CAAC,KAAD,CAAd;QACD,CAJD;MAKD,CAjBD,MAiBO;QACLF,OAAO;QACPE,cAAc,CAAC,KAAD,CAAd;MACD;IACF,CAtBM,CAAP;EAuBD,CAxBQ,EAwBN,EAxBM,CAAT;EA0BA,IAAQe,QAAR,GAAqBnB,KAArB,CAAQmB,QAAR;;EAEA,IAAIhB,WAAJ,EAAiB;IACf,OAAO,oBAAC,MAAD,OAAP;EACD;;EAED,OACE,oBAAC,WAAD,CAAa,QAAb;IACE,KAAK,EAAE;MACLF,IAAI,EAAJA;IADK;EADT,GAKGkB,QALH,CADF;AASD"},"metadata":{},"sourceType":"module"}