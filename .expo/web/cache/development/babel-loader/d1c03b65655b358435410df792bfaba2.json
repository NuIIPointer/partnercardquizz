{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useEffect, useState } from 'react';\nimport Loader from \"../components/common/Loader\";\nimport firebase from \"../config/firebase\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nexport var AuthContext = createContext({});\nexport function AuthProvider(props) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      authPending = _useState4[0],\n      setAuthPending = _useState4[1];\n\n  useEffect(function () {\n    return onAuthStateChanged(function (result) {\n      if (result) {\n        var displayName = result.displayName,\n            email = result.email,\n            uid = result.uid,\n            photoURL = result.photoURL,\n            phoneNumber = result.phoneNumber;\n        var currentUser = {\n          displayName: displayName,\n          email: email,\n          uid: uid,\n          photoURL: photoURL,\n          phoneNumber: phoneNumber,\n          isAdmin: false\n        };\n        setAuthPending(true);\n        result.getIdTokenResult().then(function (_ref) {\n          var claims = _ref.claims;\n          currentUser.isAdmin = Boolean(claims.admin);\n          setUser(currentUser);\n          setAuthPending(false);\n        });\n      } else {\n        setUser();\n        setAuthPending(false);\n      }\n    });\n  }, []);\n  var children = props.children;\n\n  if (authPending) {\n    return React.createElement(Loader, null);\n  }\n\n  return React.createElement(AuthContext.Provider, {\n    value: {\n      user: user\n    }\n  }, children);\n}","map":{"version":3,"names":["React","createContext","useEffect","useState","Loader","firebase","onAuthStateChanged","AuthContext","AuthProvider","props","user","setUser","authPending","setAuthPending","result","displayName","email","uid","photoURL","phoneNumber","currentUser","isAdmin","getIdTokenResult","then","claims","Boolean","admin","children"],"sources":["/Users/autumn/private/partnerCardQuizz/providers/AuthProvider.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\nimport Loader from '../components/common/Loader';\nimport firebase from '../config/firebase';\nimport {  onAuthStateChanged } from \"firebase/auth\";\n\nexport const AuthContext = createContext({});\n\nexport function AuthProvider(props) {\n  const [user, setUser] = useState(null);\n  const [authPending, setAuthPending] = useState(true);\n\n  useEffect(() => {\n    return onAuthStateChanged(result => {\n      if (result) {\n        const { displayName, email, uid, photoURL, phoneNumber } = result;\n        const currentUser = {\n          displayName,\n          email,\n          uid,\n          photoURL,\n          phoneNumber,\n          isAdmin: false,\n        };\n        // read claims if necessary\n        setAuthPending(true);\n        result.getIdTokenResult().then(({ claims }) => {\n          currentUser.isAdmin = Boolean(claims.admin);\n          setUser(currentUser);\n          setAuthPending(false);\n        });\n      } else {\n        setUser();\n        setAuthPending(false);\n      }\n    });\n  }, []);\n\n  const { children } = props;\n\n  if (authPending) {\n    return <Loader />;\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,EAA0CC,QAA1C,QAA0D,OAA1D;AACA,OAAOC,MAAP;AACA,OAAOC,QAAP;AACA,SAAUC,kBAAV,QAAoC,eAApC;AAEA,OAAO,IAAMC,WAAW,GAAGN,aAAa,CAAC,EAAD,CAAjC;AAEP,OAAO,SAASO,YAAT,CAAsBC,KAAtB,EAA6B;EAClC,gBAAwBN,QAAQ,CAAC,IAAD,CAAhC;EAAA;EAAA,IAAOO,IAAP;EAAA,IAAaC,OAAb;;EACA,iBAAsCR,QAAQ,CAAC,IAAD,CAA9C;EAAA;EAAA,IAAOS,WAAP;EAAA,IAAoBC,cAApB;;EAEAX,SAAS,CAAC,YAAM;IACd,OAAOI,kBAAkB,CAAC,UAAAQ,MAAM,EAAI;MAClC,IAAIA,MAAJ,EAAY;QACV,IAAQC,WAAR,GAA2DD,MAA3D,CAAQC,WAAR;QAAA,IAAqBC,KAArB,GAA2DF,MAA3D,CAAqBE,KAArB;QAAA,IAA4BC,GAA5B,GAA2DH,MAA3D,CAA4BG,GAA5B;QAAA,IAAiCC,QAAjC,GAA2DJ,MAA3D,CAAiCI,QAAjC;QAAA,IAA2CC,WAA3C,GAA2DL,MAA3D,CAA2CK,WAA3C;QACA,IAAMC,WAAW,GAAG;UAClBL,WAAW,EAAXA,WADkB;UAElBC,KAAK,EAALA,KAFkB;UAGlBC,GAAG,EAAHA,GAHkB;UAIlBC,QAAQ,EAARA,QAJkB;UAKlBC,WAAW,EAAXA,WALkB;UAMlBE,OAAO,EAAE;QANS,CAApB;QASAR,cAAc,CAAC,IAAD,CAAd;QACAC,MAAM,CAACQ,gBAAP,GAA0BC,IAA1B,CAA+B,gBAAgB;UAAA,IAAbC,MAAa,QAAbA,MAAa;UAC7CJ,WAAW,CAACC,OAAZ,GAAsBI,OAAO,CAACD,MAAM,CAACE,KAAR,CAA7B;UACAf,OAAO,CAACS,WAAD,CAAP;UACAP,cAAc,CAAC,KAAD,CAAd;QACD,CAJD;MAKD,CAjBD,MAiBO;QACLF,OAAO;QACPE,cAAc,CAAC,KAAD,CAAd;MACD;IACF,CAtBwB,CAAzB;EAuBD,CAxBQ,EAwBN,EAxBM,CAAT;EA0BA,IAAQc,QAAR,GAAqBlB,KAArB,CAAQkB,QAAR;;EAEA,IAAIf,WAAJ,EAAiB;IACf,OAAO,oBAAC,MAAD,OAAP;EACD;;EAED,OACE,oBAAC,WAAD,CAAa,QAAb;IACE,KAAK,EAAE;MACLF,IAAI,EAAJA;IADK;EADT,GAKGiB,QALH,CADF;AASD"},"metadata":{},"sourceType":"module"}